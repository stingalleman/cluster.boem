kind: ConfigMap
apiVersion: v1
metadata:
  name: mediamtx-config
  namespace: default
data:
  mediamtx.yml: |
    webrtcAdditionalHosts:
      - vroem.stingalleman.nl
      - 2a07:54c7:5201:6e6f::a
      - 45.83.205.8

    paths:
      vroem:
        # source: rtsp://10.10.11.2
        # Transport protocol used to pull the stream. available values are "automatic", "udp", "multicast", "tcp".
        # rtspTransport: tcp
      compressed:
      original:
        runOnReady: >
          ffmpeg -i rtsp://localhost:$RTSP_PORT/$MTX_PATH
            -c:v libx264 -pix_fmt yuv420p -preset ultrafast -b:v 600k -c:a libopus -b:a 64K -async 50
            -f rtsp rtsp://localhost:$RTSP_PORT/compressed
        runOnReadyRestart: yes
