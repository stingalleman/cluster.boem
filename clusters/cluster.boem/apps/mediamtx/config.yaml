kind: ConfigMap
apiVersion: v1
metadata:
  name: mediamtx-config
  namespace: default
data:
  mediamtx.yml: |
    paths:
      vroem:
        # source: rtsp://10.10.11.2
        # Transport protocol used to pull the stream. available values are "automatic", "udp", "multicast", "tcp".
        # rtspTransport: tcp
    paths:
      compressed:
      original:
        runOnReady: >
          ffmpeg -i rtsp://localhost:$RTSP_PORT/$MTX_PATH
            -c:v libx264 -pix_fmt yuv420p -preset ultrafast -b:v 600k
            -max_muxing_queue_size 1024 -f rtsp rtsp://localhost:$RTSP_PORT/compressed
        runOnReadyRestart: yes
