apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: jitsi
  namespace: default
spec:
  chart:
    spec:
      chart: jitsi-meet
      version: v1.4.1
      sourceRef:
        kind: HelmRepository
        name: jitsi
        namespace: flux-system
  interval: 24h
  values:
    jvb:
      # 1.2.3.4 being one of the IP of the ingress controller
      publicIPs:
        - 45.83.205.8
    web:
      replicaCount: 1

    jibri:
      # replicaCount: 3
      ## Enabling Jibri will allow users to record
      ## and/or stream their meetings (e.g. to YouTube).
      enabled: false # true

      ## Enable single-use mode for Jibri (recommended).
      singleUseMode: false

      ## Enable multiple Jibri instances.
      ## Secommended for single-use mode.
      replicaCount: 1

      ## Enable recording service.
      ## Set this to true/false to enable/disable local recordings.
      ## Defaults to enabled (allow local recordings).
      recording: true

      ## Enable livestreaming service.
      ## Set this to true/false to enable/disable live streams.
      ## Defaults to disabled (livestreaming is forbidden).
      livestreaming: true

      ## Enable persistent storage for local recordings.
      ## If disabled, jibri pod will use a transient
      ## emptyDir-backed storage instead.
      # persistence:
      #   enabled: true
      #   size: 32Gi

      shm:
        ## Set to true to enable "/dev/shm" mount.
        ## May be required by built-in Chromium.
        enabled: false # true
